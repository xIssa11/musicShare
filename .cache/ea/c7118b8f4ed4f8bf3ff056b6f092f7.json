{"id":"ZHT9","dependencies":[{"name":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/lib-esm/StorageCache.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/src/StorageCache.ts","includedInParent":true,"mtime":499162500000},{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1599671784193},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/package.json","includedInParent":true,"mtime":1599668814010},{"name":"./Utils","loc":{"line":13,"column":69},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/lib-esm/StorageCache.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/lib-esm/Utils/index.js"},{"name":"@aws-amplify/core","loc":{"line":14,"column":40},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/cache/lib-esm/StorageCache.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-amplify/core/lib-esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=exports.StorageCache=void 0;var e=require(\"./Utils\"),t=require(\"@aws-amplify/core\"),i=new t.ConsoleLogger(\"StorageCache\"),r=function(){function t(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+\"CurSize\",this.checkConfig()}return t.prototype.getModuleName=function(){return\"Cache\"},t.prototype.checkConfig=function(){(0,e.isInteger)(this.config.capacityInBytes)||(i.error(\"Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.\"),this.config.capacityInBytes=e.defaultConfig.capacityInBytes),(0,e.isInteger)(this.config.itemMaxSize)||(i.error(\"Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.\"),this.config.itemMaxSize=e.defaultConfig.itemMaxSize),(0,e.isInteger)(this.config.defaultTTL)||(i.error(\"Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.\"),this.config.defaultTTL=e.defaultConfig.defaultTTL),(0,e.isInteger)(this.config.defaultPriority)||(i.error(\"Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.\"),this.config.defaultPriority=e.defaultConfig.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(i.error(\"Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.\"),this.config.itemMaxSize=e.defaultConfig.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(i.error(\"Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.\"),this.config.defaultPriority=e.defaultConfig.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(i.error(\"Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.\"),this.config.warningThreshold=e.defaultConfig.warningThreshold);this.config.capacityInBytes>5242880&&(i.error(\"Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.\"),this.config.capacityInBytes=e.defaultConfig.capacityInBytes)},t.prototype.fillCacheItem=function(t,i,r){var a={key:t,data:i,timestamp:(0,e.getCurrTime)(),visitedTime:(0,e.getCurrTime)(),priority:r.priority,expires:r.expires,type:typeof i,byteSize:0};return a.byteSize=(0,e.getByteLength)(JSON.stringify(a)),a.byteSize=(0,e.getByteLength)(JSON.stringify(a)),a},t.prototype.configure=function(e){return e?(e.keyPrefix&&i.warn(\"Don't try to configure keyPrefix!\"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},t}();exports.StorageCache=r;var a=r;exports.default=a;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":0}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":13}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":20}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":35}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":43}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":56}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":57}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":64}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":68}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":76}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":84}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":92}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":110}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":112}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":116}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":118}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":126}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":137}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":139}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":1,"column":147}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":19,"column":6},"generated":{"line":1,"column":168}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":170}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":19,"column":19},"generated":{"line":1,"column":174}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":176}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":19,"column":26},"generated":{"line":1,"column":190}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":206}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":208}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":33,"column":1},"generated":{"line":1,"column":219}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":33,"column":1},"generated":{"line":1,"column":228}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":230}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":7},"generated":{"line":1,"column":233}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":7},"generated":{"line":1,"column":238}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":16},"generated":{"line":1,"column":245}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":23},"generated":{"line":1,"column":252}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":30},"generated":{"line":1,"column":259}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":34,"column":34},"generated":{"line":1,"column":262}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":7},"generated":{"line":1,"column":265}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":7},"generated":{"line":1,"column":270}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":1,"column":286}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":30},"generated":{"line":1,"column":291}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":37},"generated":{"line":1,"column":298}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":35,"column":49},"generated":{"line":1,"column":308}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":36,"column":7},"generated":{"line":1,"column":318}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":36,"column":7},"generated":{"line":1,"column":323}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":154,"column":0},"generated":{"line":1,"column":337}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":344}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":346}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":356}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":39,"column":1},"generated":{"line":1,"column":370}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":381}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":387}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":43,"column":9},"generated":{"line":1,"column":396}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":43,"column":9},"generated":{"line":1,"column":398}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":43,"column":9},"generated":{"line":1,"column":408}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":43,"column":1},"generated":{"line":1,"column":420}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":7},"generated":{"line":1,"column":432}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":17},"generated":{"line":1,"column":434}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":17},"generated":{"line":1,"column":436}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":17},"generated":{"line":1,"column":447}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":22},"generated":{"line":1,"column":452}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":1,"column":459}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":46,"column":3},"generated":{"line":1,"column":478}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":480}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":47,"column":4},"generated":{"line":1,"column":486}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":1,"column":575}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":1,"column":580}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":1,"column":587}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":33},"generated":{"line":1,"column":603}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":47},"generated":{"line":1,"column":605}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":49,"column":47},"generated":{"line":1,"column":619}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":7},"generated":{"line":1,"column":637}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":17},"generated":{"line":1,"column":639}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":17},"generated":{"line":1,"column":641}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":17},"generated":{"line":1,"column":652}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":22},"generated":{"line":1,"column":657}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":52,"column":29},"generated":{"line":1,"column":664}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":53,"column":3},"generated":{"line":1,"column":679}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":53,"column":10},"generated":{"line":1,"column":681}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":687}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":772}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":777}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":15},"generated":{"line":1,"column":784}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":29},"generated":{"line":1,"column":796}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":43},"generated":{"line":1,"column":798}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":56,"column":43},"generated":{"line":1,"column":812}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":7},"generated":{"line":1,"column":826}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":828}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":830}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":841}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":22},"generated":{"line":1,"column":846}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":59,"column":29},"generated":{"line":1,"column":853}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":60,"column":3},"generated":{"line":1,"column":867}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":869}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":875}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":959}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":964}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":15},"generated":{"line":1,"column":971}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":28},"generated":{"line":1,"column":982}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":42},"generated":{"line":1,"column":984}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":63,"column":42},"generated":{"line":1,"column":998}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":7},"generated":{"line":1,"column":1011}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":17},"generated":{"line":1,"column":1013}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":17},"generated":{"line":1,"column":1015}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":17},"generated":{"line":1,"column":1026}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":22},"generated":{"line":1,"column":1031}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":66,"column":29},"generated":{"line":1,"column":1038}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":67,"column":3},"generated":{"line":1,"column":1057}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":1059}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":1065}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1154}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1159}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":1166}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":33},"generated":{"line":1,"column":1182}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":47},"generated":{"line":1,"column":1184}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":70,"column":47},"generated":{"line":1,"column":1198}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":6},"generated":{"line":1,"column":1215}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":11},"generated":{"line":1,"column":1220}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":18},"generated":{"line":1,"column":1227}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":32},"generated":{"line":1,"column":1239}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":37},"generated":{"line":1,"column":1244}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":73,"column":44},"generated":{"line":1,"column":1251}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":74,"column":3},"generated":{"line":1,"column":1269}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":74,"column":10},"generated":{"line":1,"column":1271}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":75,"column":4},"generated":{"line":1,"column":1277}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1380}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1385}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":15},"generated":{"line":1,"column":1392}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":29},"generated":{"line":1,"column":1404}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":43},"generated":{"line":1,"column":1406}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":77,"column":43},"generated":{"line":1,"column":1420}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":6},"generated":{"line":1,"column":1434}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":11},"generated":{"line":1,"column":1439}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":18},"generated":{"line":1,"column":1446}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":36},"generated":{"line":1,"column":1462}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":41},"generated":{"line":1,"column":1465}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":46},"generated":{"line":1,"column":1470}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":53},"generated":{"line":1,"column":1477}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":80,"column":71},"generated":{"line":1,"column":1493}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":81,"column":3},"generated":{"line":1,"column":1498}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":1,"column":1500}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":1506}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1600}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1605}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":1612}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":33},"generated":{"line":1,"column":1628}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":47},"generated":{"line":1,"column":1630}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":84,"column":47},"generated":{"line":1,"column":1644}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":88,"column":3},"generated":{"line":1,"column":1662}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":1,"column":1669}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":88,"column":15},"generated":{"line":1,"column":1674}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":88,"column":22},"generated":{"line":1,"column":1681}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":88,"column":42},"generated":{"line":1,"column":1699}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":89,"column":3},"generated":{"line":1,"column":1702}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":89,"column":10},"generated":{"line":1,"column":1709}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":89,"column":15},"generated":{"line":1,"column":1714}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":89,"column":22},"generated":{"line":1,"column":1721}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":89,"column":42},"generated":{"line":1,"column":1739}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":91,"column":3},"generated":{"line":1,"column":1744}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":1,"column":1746}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":92,"column":4},"generated":{"line":1,"column":1752}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":8},"generated":{"line":1,"column":1847}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":8},"generated":{"line":1,"column":1852}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":15},"generated":{"line":1,"column":1859}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":34},"generated":{"line":1,"column":1876}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":48},"generated":{"line":1,"column":1878}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":94,"column":48},"generated":{"line":1,"column":1892}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":98,"column":6},"generated":{"line":1,"column":1910}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":98,"column":11},"generated":{"line":1,"column":1915}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":98,"column":18},"generated":{"line":1,"column":1922}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":97,"column":29},"generated":{"line":1,"column":1938}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":99,"column":3},"generated":{"line":1,"column":1948}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":1950}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":100,"column":4},"generated":{"line":1,"column":1956}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":8},"generated":{"line":1,"column":2049}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":8},"generated":{"line":1,"column":2054}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":15},"generated":{"line":1,"column":2061}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":33},"generated":{"line":1,"column":2077}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":47},"generated":{"line":1,"column":2079}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":102,"column":47},"generated":{"line":1,"column":2093}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":113,"column":11},"generated":{"line":1,"column":2111}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":113,"column":11},"generated":{"line":1,"column":2113}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":113,"column":11},"generated":{"line":1,"column":2123}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":113,"column":1},"generated":{"line":1,"column":2137}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":114,"column":2},"generated":{"line":1,"column":2146}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":115,"column":2},"generated":{"line":1,"column":2148}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":116,"column":2},"generated":{"line":1,"column":2150}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":8},"generated":{"line":1,"column":2153}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":8},"generated":{"line":1,"column":2157}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":2159}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":119,"column":3},"generated":{"line":1,"column":2160}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":119,"column":6},"generated":{"line":1,"column":2164}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":120,"column":3},"generated":{"line":1,"column":2166}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":120,"column":9},"generated":{"line":1,"column":2171}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":121,"column":3},"generated":{"line":1,"column":2173}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":121,"column":14},"generated":{"line":1,"column":2184}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":2186}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":2188}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":122,"column":3},"generated":{"line":1,"column":2203}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":122,"column":16},"generated":{"line":1,"column":2216}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":2218}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":118,"column":25},"generated":{"line":1,"column":2220}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":123,"column":3},"generated":{"line":1,"column":2235}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":123,"column":13},"generated":{"line":1,"column":2244}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":123,"column":21},"generated":{"line":1,"column":2246}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":124,"column":3},"generated":{"line":1,"column":2255}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":124,"column":12},"generated":{"line":1,"column":2263}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":124,"column":20},"generated":{"line":1,"column":2265}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":125,"column":3},"generated":{"line":1,"column":2273}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":125,"column":16},"generated":{"line":1,"column":2285}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":126,"column":3},"generated":{"line":1,"column":2287}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":126,"column":13},"generated":{"line":1,"column":2296}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":133,"column":9},"generated":{"line":1,"column":2299}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":2},"generated":{"line":1,"column":2306}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":6},"generated":{"line":1,"column":2308}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":17},"generated":{"line":1,"column":2318}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":31},"generated":{"line":1,"column":2320}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":31},"generated":{"line":1,"column":2322}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":31},"generated":{"line":1,"column":2337}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":36},"generated":{"line":1,"column":2342}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":129,"column":46},"generated":{"line":1,"column":2352}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":2},"generated":{"line":1,"column":2356}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":6},"generated":{"line":1,"column":2358}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":17},"generated":{"line":1,"column":2368}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":31},"generated":{"line":1,"column":2370}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":31},"generated":{"line":1,"column":2372}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":31},"generated":{"line":1,"column":2387}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":36},"generated":{"line":1,"column":2392}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":132,"column":46},"generated":{"line":1,"column":2402}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":133,"column":9},"generated":{"line":1,"column":2406}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":1,"column":2409}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":1,"column":2411}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":142,"column":8},"generated":{"line":1,"column":2421}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":142,"column":1},"generated":{"line":1,"column":2431}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":142,"column":18},"generated":{"line":1,"column":2440}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":143,"column":6},"generated":{"line":1,"column":2443}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":143,"column":7},"generated":{"line":1,"column":2450}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":146,"column":6},"generated":{"line":1,"column":2453}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":146,"column":13},"generated":{"line":1,"column":2455}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":147,"column":3},"generated":{"line":1,"column":2466}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":147,"column":10},"generated":{"line":1,"column":2468}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":147,"column":15},"generated":{"line":1,"column":2473}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":7},"generated":{"line":1,"column":2510}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":7},"generated":{"line":1,"column":2515}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":16},"generated":{"line":1,"column":2522}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":23},"generated":{"line":1,"column":2529}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":30},"generated":{"line":1,"column":2536}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":34},"generated":{"line":1,"column":2539}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":39},"generated":{"line":1,"column":2544}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":47},"generated":{"line":1,"column":2551}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":55},"generated":{"line":1,"column":2553}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":150,"column":62},"generated":{"line":1,"column":2555}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":151,"column":7},"generated":{"line":1,"column":2562}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":151,"column":7},"generated":{"line":1,"column":2567}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":152,"column":9},"generated":{"line":1,"column":2581}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":152,"column":14},"generated":{"line":1,"column":2586}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":144,"column":10},"generated":{"line":1,"column":2594}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":144,"column":15},"generated":{"line":1,"column":2599}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":154,"column":0},"generated":{"line":1,"column":2607}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":2609}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2612}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2620}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2633}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2635}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2639}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2641}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2643}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2651}},{"source":"../src/StorageCache.ts","name":null,"original":{"line":159,"column":15},"generated":{"line":1,"column":2659}}],"sources":{"../src/StorageCache.ts":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\n\r\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\r\n\r\nimport { CacheConfig, CacheItem, CacheItemOptions } from './types';\r\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\r\n\r\nconst logger = new Logger('StorageCache');\r\n\r\n/**\r\n * Initialization of the cache\r\n *\r\n */\r\nexport class StorageCache {\r\n\tprotected cacheCurSizeKey: string;\r\n\tprotected config: CacheConfig;\r\n\r\n\t/**\r\n\t * Initialize the cache\r\n\t * @param config - the configuration of the cache\r\n\t */\r\n\tconstructor(config: CacheConfig) {\r\n\t\tthis.config = Object.assign({}, config);\r\n\t\tthis.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\r\n\t\tthis.checkConfig();\r\n\t}\r\n\r\n\tpublic getModuleName() {\r\n\t\treturn 'Cache';\r\n\t}\r\n\r\n\tprivate checkConfig(): void {\r\n\t\t// check configuration\r\n\t\tif (!isInteger(this.config.capacityInBytes)) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.capacityInBytes = defaultConfig.capacityInBytes;\r\n\t\t}\r\n\r\n\t\tif (!isInteger(this.config.itemMaxSize)) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.itemMaxSize = defaultConfig.itemMaxSize;\r\n\t\t}\r\n\r\n\t\tif (!isInteger(this.config.defaultTTL)) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.defaultTTL = defaultConfig.defaultTTL;\r\n\t\t}\r\n\r\n\t\tif (!isInteger(this.config.defaultPriority)) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.defaultPriority = defaultConfig.defaultPriority;\r\n\t\t}\r\n\r\n\t\tif (this.config.itemMaxSize > this.config.capacityInBytes) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.itemMaxSize = defaultConfig.itemMaxSize;\r\n\t\t}\r\n\r\n\t\tif (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.defaultPriority = defaultConfig.defaultPriority;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tNumber(this.config.warningThreshold) > 1 ||\r\n\t\t\tNumber(this.config.warningThreshold) < 0\r\n\t\t) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.warningThreshold = defaultConfig.warningThreshold;\r\n\t\t}\r\n\t\t// set 5MB limit\r\n\t\tconst cacheLimit: number = 5 * 1024 * 1024;\r\n\t\tif (this.config.capacityInBytes > cacheLimit) {\r\n\t\t\tlogger.error(\r\n\t\t\t\t'Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.'\r\n\t\t\t);\r\n\t\t\tthis.config.capacityInBytes = defaultConfig.capacityInBytes;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * produce a JSON object with meta-data and data value\r\n\t * @param value - the value of the item\r\n\t * @param options - optional, the specified meta-data\r\n\t *\r\n\t * @return - the item which has the meta-data and the value\r\n\t */\r\n\tprotected fillCacheItem(\r\n\t\tkey: string,\r\n\t\tvalue: object | number | string | boolean,\r\n\t\toptions: CacheItemOptions\r\n\t): CacheItem {\r\n\t\tconst ret: CacheItem = {\r\n\t\t\tkey,\r\n\t\t\tdata: value,\r\n\t\t\ttimestamp: getCurrTime(),\r\n\t\t\tvisitedTime: getCurrTime(),\r\n\t\t\tpriority: options.priority,\r\n\t\t\texpires: options.expires,\r\n\t\t\ttype: typeof value,\r\n\t\t\tbyteSize: 0,\r\n\t\t};\r\n\r\n\t\tret.byteSize = getByteLength(JSON.stringify(ret));\r\n\r\n\t\t// for accurate size\r\n\t\tret.byteSize = getByteLength(JSON.stringify(ret));\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t/**\r\n\t * set cache with customized configuration\r\n\t * @param config - customized configuration\r\n\t *\r\n\t * @return - the current configuration\r\n\t */\r\n\tpublic configure(config?: CacheConfig): CacheConfig {\r\n\t\tif (!config) {\r\n\t\t\treturn this.config;\r\n\t\t}\r\n\t\tif (config.keyPrefix) {\r\n\t\t\tlogger.warn(`Don't try to configure keyPrefix!`);\r\n\t\t}\r\n\r\n\t\tthis.config = Object.assign({}, this.config, config, config.Cache);\r\n\t\tthis.checkConfig();\r\n\t\treturn this.config;\r\n\t}\r\n}\r\n\r\n/**\r\n * @deprecated use named import\r\n */\r\nexport default StorageCache;\r\n"},"lineCount":null}},"error":null,"hash":"6e11db620c3617e52264e92af8227e7f","cacheData":{"env":{}}}