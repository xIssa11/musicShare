{"id":"node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","dependencies":[{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/spittela/code/giphlify/package.json","includedInParent":true,"mtime":1599671784193},{"name":"/Users/spittela/code/giphlify/.babelrc","includedInParent":true,"mtime":1599669969128},{"name":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/package.json","includedInParent":true,"mtime":1599668814020},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/client-cognito-identity","loc":{"line":5,"column":40},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/client-cognito-identity/dist/es/index.js"},{"name":"@aws-sdk/property-provider","loc":{"line":6,"column":34},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/property-provider/dist/cjs/index.js"},{"name":"./fromCognitoIdentity","loc":{"line":7,"column":36},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentity.js"},{"name":"./localStorage","loc":{"line":8,"column":29},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/localStorage.js"},{"name":"./resolveLogins","loc":{"line":9,"column":30},"parent":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/fromCognitoIdentityPool.js","resolved":"/Users/spittela/code/giphlify/node_modules/@aws-sdk/credential-provider-cognito-identity/dist/cjs/resolveLogins.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fromCognitoIdentityPool = void 0;\nvar tslib_1 = require(\"tslib\");\nvar client_cognito_identity_1 = require(\"@aws-sdk/client-cognito-identity\");\nvar property_provider_1 = require(\"@aws-sdk/property-provider\");\nvar fromCognitoIdentity_1 = require(\"./fromCognitoIdentity\");\nvar localStorage_1 = require(\"./localStorage\");\nvar resolveLogins_1 = require(\"./resolveLogins\");\n/**\n * Retrieves or generates a unique identifier using Amazon Cognito's `GetId`\n * operation, then generates temporary AWS credentials using Amazon Cognito's\n * `GetCredentialsForIdentity` operation.\n *\n * Results from `GetId` are cached internally, but results from\n * `GetCredentialsForIdentity` are not.\n */\nfunction fromCognitoIdentityPool(_a) {\n    var _this = this;\n    var accountId = _a.accountId, _b = _a.cache, cache = _b === void 0 ? localStorage_1.localStorage() : _b, client = _a.client, customRoleArn = _a.customRoleArn, identityPoolId = _a.identityPoolId, logins = _a.logins, _c = _a.userIdentifier, userIdentifier = _c === void 0 ? !logins || Object.keys(logins).length === 0 ? \"ANONYMOUS\" : undefined : _c;\n    var cacheKey = userIdentifier ? \"aws:cognito-identity-credentials:\" + identityPoolId + \":\" + userIdentifier : undefined;\n    var provider = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var identityId, _a, _b, IdentityId, _c, _d, _e, _f, _g;\n        return tslib_1.__generator(this, function (_h) {\n            switch (_h.label) {\n                case 0:\n                    _a = cacheKey;\n                    if (!_a) return [3 /*break*/, 2];\n                    return [4 /*yield*/, cache.getItem(cacheKey)];\n                case 1:\n                    _a = (_h.sent());\n                    _h.label = 2;\n                case 2:\n                    identityId = _a;\n                    if (!!identityId) return [3 /*break*/, 7];\n                    _d = (_c = client).send;\n                    _e = client_cognito_identity_1.GetIdCommand.bind;\n                    _f = {\n                        AccountId: accountId,\n                        IdentityPoolId: identityPoolId\n                    };\n                    if (!logins) return [3 /*break*/, 4];\n                    return [4 /*yield*/, resolveLogins_1.resolveLogins(logins)];\n                case 3:\n                    _g = _h.sent();\n                    return [3 /*break*/, 5];\n                case 4:\n                    _g = undefined;\n                    _h.label = 5;\n                case 5: return [4 /*yield*/, _d.apply(_c, [new (_e.apply(client_cognito_identity_1.GetIdCommand, [void 0, (_f.Logins = _g,\n                                _f)]))()])];\n                case 6:\n                    _b = (_h.sent()).IdentityId, IdentityId = _b === void 0 ? throwOnMissingId() : _b;\n                    identityId = IdentityId;\n                    if (cacheKey) {\n                        Promise.resolve(cache.setItem(cacheKey, identityId)).catch(function () { });\n                    }\n                    _h.label = 7;\n                case 7:\n                    provider = fromCognitoIdentity_1.fromCognitoIdentity({\n                        client: client,\n                        customRoleArn: customRoleArn,\n                        logins: logins,\n                        identityId: identityId,\n                    });\n                    return [2 /*return*/, provider()];\n            }\n        });\n    }); };\n    return function () {\n        return provider().catch(function (err) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                if (cacheKey) {\n                    Promise.resolve(cache.removeItem(cacheKey)).catch(function () { });\n                }\n                throw err;\n            });\n        }); });\n    };\n}\nexports.fromCognitoIdentityPool = fromCognitoIdentityPool;\nfunction throwOnMissingId() {\n    throw new property_provider_1.ProviderError(\"Response from Amazon Cognito contained no identity ID\");\n}\n"},"sourceMaps":{"js":{"version":3,"file":"fromCognitoIdentityPool.js","sourceRoot":"","sources":["../../src/fromCognitoIdentityPool.ts"],"names":[],"mappings":";;;;AAAA,4EAAgE;AAChE,gEAA2D;AAI3D,6DAA4D;AAC5D,+CAA8C;AAC9C,iDAAgD;AAGhD;;;;;;;GAOG;AACH,SAAgB,uBAAuB,CAAC,EAQJ;IARpC,iBA6CC;QA5CC,SAAS,eAAA,EACT,aAAsB,EAAtB,KAAK,mBAAG,2BAAY,EAAE,KAAA,EACtB,MAAM,YAAA,EACN,aAAa,mBAAA,EACb,cAAc,oBAAA,EACd,MAAM,YAAA,EACN,sBAAsF,EAAtF,cAAc,mBAAG,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,KAAA;IAEtF,IAAM,QAAQ,GAAG,cAAc,CAAC,CAAC,CAAC,sCAAoC,cAAc,SAAI,cAAgB,CAAC,CAAC,CAAC,SAAS,CAAC;IAErH,IAAI,QAAQ,GAAuB;;;;;oBAChB,KAAA,QAAQ,CAAA;6BAAR,wBAAQ;oBAAK,qBAAM,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAA;;oBAA9B,KAAA,CAAC,SAA6B,CAAC,CAAA;;;oBAAxD,UAAU,KAA8C;yBACxD,CAAC,UAAU,EAAX,wBAAW;oBACqC,KAAA,CAAA,KAAA,MAAM,CAAA,CAAC,IAAI,CAAA;yBACvD,sCAAY;;wBACd,SAAS,EAAE,SAAS;wBACpB,cAAc,EAAE,cAAc;;yBACtB,MAAM,EAAN,wBAAM;oBAAG,qBAAM,6BAAa,CAAC,MAAM,CAAC,EAAA;;oBAA3B,KAAA,SAA2B,CAAA;;;oBAAG,KAAA,SAAS,CAAA;;wBAJhB,qBAAM,cAChD,cAAI,sCAAY,YAGd,SAAM,KAAkD;wCACxD,EACH,EAAA;;oBANO,KAAoC,CAAA,SAM3C,CAAA,WANsC,EAA/B,UAAU,mBAAG,gBAAgB,EAAE,KAAA;oBAOvC,UAAU,GAAG,UAAU,CAAC;oBACxB,IAAI,QAAQ,EAAE;wBACZ,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,cAAO,CAAC,CAAC,CAAC;qBACtE;;;oBAGH,QAAQ,GAAG,yCAAmB,CAAC;wBAC7B,MAAM,QAAA;wBACN,aAAa,eAAA;wBACb,MAAM,QAAA;wBACN,UAAU,YAAA;qBACX,CAAC,CAAC;oBAEH,sBAAO,QAAQ,EAAE,EAAC;;;SACnB,CAAC;IAEF,OAAO;QACL,OAAA,QAAQ,EAAE,CAAC,KAAK,CAAC,UAAO,GAAG;;gBACzB,IAAI,QAAQ,EAAE;oBACZ,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,cAAO,CAAC,CAAC,CAAC;iBAC7D;gBAED,MAAM,GAAG,CAAC;;aACX,CAAC;IANF,CAME,CAAC;AACP,CAAC;AA7CD,0DA6CC;AAsCD,SAAS,gBAAgB;IACvB,MAAM,IAAI,iCAAa,CAAC,uDAAuD,CAAC,CAAC;AACnF,CAAC","sourcesContent":[null]}},"error":null,"hash":"6dde284d376ff206fabf98aa2f0b24e3","cacheData":{"env":{}}}